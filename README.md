# 闪验uniappx插件项目
## 一.准备工作

### 概述
本文是创蓝闪验SDK在uniappx中使用的集成文档，用于指导 SDK 的集成使用。
### 合规性说明
详见[**SDK初始化合规性指南**](https://doc.chuanglan.com/document/TMEL2UML9YBDH0Y1)

### 能力介绍
**一键登录：SDK获取当前流量卡对应的token，通过服务端可置换当前流量卡的手机号码。**

**本机校验：SDK获取当前流量卡对应的token，提供手机号码，通过服务端可校验提供的手机号是否为当前流量卡的手机号码。**

**`注意：本机校验和一键登录是两个单独的能力，两者的token不能互用，否则会报"应用能力不匹配"。`**
### 前置条件

- 创蓝闪验 SDK 支持中国移动 3/4G/5G、联通 3/4G/5G、电信 4G/5G 的取号能力，在 3G 网络下时延会更高
- 创蓝闪验 SDK 支持单数据网络、数据网络与 WiFi 网络双开，不支持单 WiFi 网络
- 对于双卡手机，创蓝闪验 SDK 只对当前流量卡取号，双卡均未开数据流量 SDK 将会返回错误码

**注意：三网运营商内部执行逻辑不同，必须分别使用三网运营商的卡进行测试，防止功能异常**
### 创建应用

应用的创建流程及AppId的获取，请查看「[账号创建](https://doc.chuanglan.com/document/4UB4MAZI1OVH7X5K)」文档

## 二.一键登录 api
### 0.提升授权页的打开速度

- 建议在执行拉取授权登录页的方法前，提前一段时间调用预取号方法，中间最好有 2-3 秒的缓冲（因为预取号方法需要 1~3s 的时间取得临时凭证）

- 如果条件允许，超时时间设置为 6 秒有助于网络不好的时候取号成功率，SDK 默认 4 秒。
## 1.初始化

**调用 SDK 其他流程方法前，请确保已调用过初始化，否则会返回未初始化。（会采集信息，建议放到同意协议后调用）**

方法原型
```uts
export function initWithAppId(appId : string,callback : InitCallback) {}
```
参数描述

| 参数         | 类型         | 说明                       |
| ------------ | ------------ | -------------------------- |
| appId        | String       | 创蓝闪验平台获取到的 appId     |
| callback | InitCallback | 初始化回调监听             |

示例代码

```uvue
initWithAppId('your_app_id', ({code, result}) => {
 console.log(`初始化状态: ${code}, 结果: ${result}`);
});
```
